{"version":3,"sources":["../../server/next.ts"],"names":["createServer","options","standardEnv","Error","isNextDevCommand","process","env","NODE_ENV","includes","log","warn","NON_STANDARD_NODE_ENV","dev","console","DevServer","require","default","Server","module","exports"],"mappings":"4DAAA,qFACA,2CACA,gE,w4BASA;AACA,QAASA,CAAAA,YAAT,CAAsBC,OAAtB,CAA8D,CAC5D,KAAMC,CAAAA,WAAW,CAAG,CAAC,YAAD,CAAe,aAAf,CAA8B,MAA9B,CAApB,CAEA,GAAID,OAAO,EAAI,IAAf,CAAqB,CACnB,KAAM,IAAIE,CAAAA,KAAJ,CACJ,8FADI,CAAN,CAGD,CAED,GACE,CAAEF,OAAD,CAAiBG,gBAAlB,EACAC,OAAO,CAACC,GAAR,CAAYC,QADZ,EAEA,CAACL,WAAW,CAACM,QAAZ,CAAqBH,OAAO,CAACC,GAAR,CAAYC,QAAjC,CAHH,CAIE,CACAE,GAAG,CAACC,IAAJ,CAASC,gCAAT,EACD,CAED,GAAIV,OAAO,CAACW,GAAZ,CAAiB,CACf,GAAI,MAAOX,CAAAA,OAAO,CAACW,GAAf,GAAuB,SAA3B,CAAsC,CACpCC,OAAO,CAACH,IAAR,CACE,0HADF,EAGD,CAED,KAAMI,CAAAA,SAAS,CAAGC,OAAO,CAAC,mBAAD,CAAP,CAA6BC,OAA/C,CACA,MAAO,IAAIF,CAAAA,SAAJ,CAAcb,OAAd,CAAP,CACD,CAED,MAAO,IAAIgB,oBAAJ,CAAWhB,OAAX,CAAP,CACD,CAED;AACAiB,MAAM,CAACC,OAAP,CAAiBnB,YAAjB,CACAmB,OAAO,CAAGD,MAAM,CAACC,OAAjB,CAEA;aACenB,Y","sourcesContent":["import Server, { ServerConstructor } from '../next-server/server/next-server'\nimport { NON_STANDARD_NODE_ENV } from '../lib/constants'\nimport * as log from '../build/output/log'\n\ntype NextServerConstructor = ServerConstructor & {\n  /**\n   * Whether to launch Next.js in dev mode - @default false\n   */\n  dev?: boolean\n}\n\n// This file is used for when users run `require('next')`\nfunction createServer(options: NextServerConstructor): Server {\n  const standardEnv = ['production', 'development', 'test']\n\n  if (options == null) {\n    throw new Error(\n      'The server has not been instantiated properly. https://err.sh/next.js/invalid-server-options'\n    )\n  }\n\n  if (\n    !(options as any).isNextDevCommand &&\n    process.env.NODE_ENV &&\n    !standardEnv.includes(process.env.NODE_ENV)\n  ) {\n    log.warn(NON_STANDARD_NODE_ENV)\n  }\n\n  if (options.dev) {\n    if (typeof options.dev !== 'boolean') {\n      console.warn(\n        \"Warning: 'dev' is not a boolean which could introduce unexpected behavior. https://err.sh/next.js/invalid-server-options\"\n      )\n    }\n\n    const DevServer = require('./next-dev-server').default\n    return new DevServer(options)\n  }\n\n  return new Server(options)\n}\n\n// Support commonjs `require('next')`\nmodule.exports = createServer\nexports = module.exports\n\n// Support `import next from 'next'`\nexport default createServer\n"]}
{"version":3,"sources":["../../../client/dev/event-source-polyfill.js"],"names":["document","window","Response","TextDecoder","TextEncoder","AbortController","undefined","signal","abort","TextDecoderPolyfill","bitsNeeded","codePoint","prototype","decode","octets","valid","shift","octetsCount","Error","REPLACER","string","i","length","octet","String","fromCharCode","supportsStreamOption","encode","stream","error","console","log","k","XHRWrapper","xhr","withCredentials","responseType","readyState","status","statusText","responseText","onprogress","onreadystatechange","_contentType","_xhr","_sendTimeout","_abort","open","method","url","that","state","timeout","silent","clearTimeout","onload","onerror","onabort","onStart","contentType","getResponseHeader","onProgress","onFinish","onReadyStateChange","onTimeout","setTimeout","XMLHttpRequest","indexOf","name","setRequestHeader","value","getAllResponseHeaders","send","error1","toLowerCase","replace","c","charCodeAt","HeadersPolyfill","all","map","Object","create","array","split","line","parts","join","_map","get","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","headers","offset","chunk","slice","hasOwnProperty","call","HeadersWrapper","_headers","FetchTransport","controller","textDecoder","fetch","credentials","cache","then","response","reader","body","getReader","cancel","Promise","resolve","reject","readNextChunk","read","result","done","EventTarget","_listeners","throwError","e","dispatchEvent","event","target","typeListeners","type","listener","handleEvent","addEventListener","listeners","found","push","removeEventListener","filtered","Event","MessageEvent","options","data","lastEventId","ConnectionEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","def","n","parseInt","clampDuration","Math","min","max","fire","f","EventSourcePolyfill","onopen","onmessage","_close","start","isFetchSupported","es","Boolean","initialRetry","heartbeatTimeout","retry","wasActivity","JSON","parse","stringify","CurrentTransport","Transport","transport","cancelFunction","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","test","message","close","textChunk","position","field","requestURL","encodeURIComponent","requestHeaders"],"mappings":"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","sourcesContent":["/* eslint-disable */\n// Improved version of https://github.com/Yaffle/EventSource/\n// Available under MIT License (MIT)\n// Only tries to support IE11 and nothing below\nvar document = window.document\nvar Response = window.Response\nvar TextDecoder = window.TextDecoder\nvar TextEncoder = window.TextEncoder\nvar AbortController = window.AbortController\n\nif (AbortController == undefined) {\n  AbortController = function () {\n    this.signal = null\n    this.abort = function () {}\n  }\n}\n\nfunction TextDecoderPolyfill() {\n  this.bitsNeeded = 0\n  this.codePoint = 0\n}\n\nTextDecoderPolyfill.prototype.decode = function (octets) {\n  function valid(codePoint, shift, octetsCount) {\n    if (octetsCount === 1) {\n      return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07ff\n    }\n    if (octetsCount === 2) {\n      return (\n        (codePoint >= 0x0800 >> shift && codePoint << shift <= 0xd7ff) ||\n        (codePoint >= 0xe000 >> shift && codePoint << shift <= 0xffff)\n      )\n    }\n    if (octetsCount === 3) {\n      return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10ffff\n    }\n    throw new Error()\n  }\n  function octetsCount(bitsNeeded, codePoint) {\n    if (bitsNeeded === 6 * 1) {\n      return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1\n    }\n    if (bitsNeeded === 6 * 2) {\n      return codePoint > 15 ? 3 : 2\n    }\n    if (bitsNeeded === 6 * 3) {\n      return 3\n    }\n    throw new Error()\n  }\n  var REPLACER = 0xfffd\n  var string = ''\n  var bitsNeeded = this.bitsNeeded\n  var codePoint = this.codePoint\n  for (var i = 0; i < octets.length; i += 1) {\n    var octet = octets[i]\n    if (bitsNeeded !== 0) {\n      if (\n        octet < 128 ||\n        octet > 191 ||\n        !valid(\n          (codePoint << 6) | (octet & 63),\n          bitsNeeded - 6,\n          octetsCount(bitsNeeded, codePoint)\n        )\n      ) {\n        bitsNeeded = 0\n        codePoint = REPLACER\n        string += String.fromCharCode(codePoint)\n      }\n    }\n    if (bitsNeeded === 0) {\n      if (octet >= 0 && octet <= 127) {\n        bitsNeeded = 0\n        codePoint = octet\n      } else if (octet >= 192 && octet <= 223) {\n        bitsNeeded = 6 * 1\n        codePoint = octet & 31\n      } else if (octet >= 224 && octet <= 239) {\n        bitsNeeded = 6 * 2\n        codePoint = octet & 15\n      } else if (octet >= 240 && octet <= 247) {\n        bitsNeeded = 6 * 3\n        codePoint = octet & 7\n      } else {\n        bitsNeeded = 0\n        codePoint = REPLACER\n      }\n      if (\n        bitsNeeded !== 0 &&\n        !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))\n      ) {\n        bitsNeeded = 0\n        codePoint = REPLACER\n      }\n    } else {\n      bitsNeeded -= 6\n      codePoint = (codePoint << 6) | (octet & 63)\n    }\n    if (bitsNeeded === 0) {\n      if (codePoint <= 0xffff) {\n        string += String.fromCharCode(codePoint)\n      } else {\n        string += String.fromCharCode(0xd800 + ((codePoint - 0xffff - 1) >> 10))\n        string += String.fromCharCode(\n          0xdc00 + ((codePoint - 0xffff - 1) & 0x3ff)\n        )\n      }\n    }\n  }\n  this.bitsNeeded = bitsNeeded\n  this.codePoint = codePoint\n  return string\n}\n\n// Firefox < 38 throws an error with stream option\nvar supportsStreamOption = function () {\n  try {\n    return (\n      new TextDecoder().decode(new TextEncoder().encode('test'), {\n        stream: true,\n      }) === 'test'\n    )\n  } catch (error) {\n    console.log(error)\n  }\n  return false\n}\n\n// IE, Edge\nif (\n  TextDecoder == undefined ||\n  TextEncoder == undefined ||\n  !supportsStreamOption()\n) {\n  TextDecoder = TextDecoderPolyfill\n}\n\nvar k = function () {}\n\nfunction XHRWrapper(xhr) {\n  this.withCredentials = false\n  this.responseType = ''\n  this.readyState = 0\n  this.status = 0\n  this.statusText = ''\n  this.responseText = ''\n  this.onprogress = k\n  this.onreadystatechange = k\n  this._contentType = ''\n  this._xhr = xhr\n  this._sendTimeout = 0\n  this._abort = k\n}\n\nXHRWrapper.prototype.open = function (method, url) {\n  this._abort(true)\n\n  var that = this\n  var xhr = this._xhr\n  var state = 1\n  var timeout = 0\n\n  this._abort = function (silent) {\n    if (that._sendTimeout !== 0) {\n      clearTimeout(that._sendTimeout)\n      that._sendTimeout = 0\n    }\n    if (state === 1 || state === 2 || state === 3) {\n      state = 4\n      xhr.onload = k\n      xhr.onerror = k\n      xhr.onabort = k\n      xhr.onprogress = k\n      xhr.onreadystatechange = k\n      // IE 8 - 9: XDomainRequest#abort() does not fire any event\n      // Opera < 10: XMLHttpRequest#abort() does not fire any event\n      xhr.abort()\n      if (timeout !== 0) {\n        clearTimeout(timeout)\n        timeout = 0\n      }\n      if (!silent) {\n        that.readyState = 4\n        that.onreadystatechange()\n      }\n    }\n    state = 0\n  }\n\n  var onStart = function () {\n    if (state === 1) {\n      // state = 2;\n      var status = 0\n      var statusText = ''\n      var contentType = undefined\n      if (!('contentType' in xhr)) {\n        try {\n          status = xhr.status\n          statusText = xhr.statusText\n          contentType = xhr.getResponseHeader('Content-Type')\n        } catch (error) {\n          // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\n          // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\n          // https://bugs.webkit.org/show_bug.cgi?id=29121\n          status = 0\n          statusText = ''\n          contentType = undefined\n          // Firefox < 14, Chrome ?, Safari ?\n          // https://bugs.webkit.org/show_bug.cgi?id=29658\n          // https://bugs.webkit.org/show_bug.cgi?id=77854\n        }\n      } else {\n        status = 200\n        statusText = 'OK'\n        contentType = xhr.contentType\n      }\n      if (status !== 0) {\n        state = 2\n        that.readyState = 2\n        that.status = status\n        that.statusText = statusText\n        that._contentType = contentType\n        that.onreadystatechange()\n      }\n    }\n  }\n  var onProgress = function () {\n    onStart()\n    if (state === 2 || state === 3) {\n      state = 3\n      var responseText = ''\n      try {\n        responseText = xhr.responseText\n      } catch (error) {\n        // IE 8 - 9 with XMLHttpRequest\n      }\n      that.readyState = 3\n      that.responseText = responseText\n      that.onprogress()\n    }\n  }\n  var onFinish = function () {\n    // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\n    // IE 8 fires \"onload\" without \"onprogress\"\n    onProgress()\n    if (state === 1 || state === 2 || state === 3) {\n      state = 4\n      if (timeout !== 0) {\n        clearTimeout(timeout)\n        timeout = 0\n      }\n      that.readyState = 4\n      that.onreadystatechange()\n    }\n  }\n  var onReadyStateChange = function () {\n    if (xhr != undefined) {\n      // Opera 12\n      if (xhr.readyState === 4) {\n        onFinish()\n      } else if (xhr.readyState === 3) {\n        onProgress()\n      } else if (xhr.readyState === 2) {\n        onStart()\n      }\n    }\n  }\n  var onTimeout = function () {\n    timeout = setTimeout(function () {\n      onTimeout()\n    }, 500)\n    if (xhr.readyState === 3) {\n      onProgress()\n    }\n  }\n\n  // XDomainRequest#abort removes onprogress, onerror, onload\n  xhr.onload = onFinish\n  xhr.onerror = onFinish\n  // improper fix to match Firefox behavior, but it is better than just ignore abort\n  // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\n  // https://code.google.com/p/chromium/issues/detail?id=153570\n  // IE 8 fires \"onload\" without \"onprogress\n  xhr.onabort = onFinish\n\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\n  if (\n    !('sendAsBinary' in XMLHttpRequest.prototype) &&\n    !('mozAnon' in XMLHttpRequest.prototype)\n  ) {\n    xhr.onprogress = onProgress\n  }\n\n  // IE 8 - 9 (XMLHTTPRequest)\n  // Opera < 12\n  // Firefox < 3.5\n  // Firefox 3.5 - 3.6 - ? < 9.0\n  // onprogress is not fired sometimes or delayed\n  // see also #64\n  xhr.onreadystatechange = onReadyStateChange\n\n  if ('contentType' in xhr) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + 'padding=true'\n  }\n  xhr.open(method, url, true)\n\n  if ('readyState' in xhr) {\n    // workaround for Opera 12 issue with \"progress\" events\n    // #91\n    timeout = setTimeout(function () {\n      onTimeout()\n    }, 0)\n  }\n}\nXHRWrapper.prototype.abort = function () {\n  this._abort(false)\n}\nXHRWrapper.prototype.getResponseHeader = function (name) {\n  return this._contentType\n}\nXHRWrapper.prototype.setRequestHeader = function (name, value) {\n  var xhr = this._xhr\n  if ('setRequestHeader' in xhr) {\n    xhr.setRequestHeader(name, value)\n  }\n}\nXHRWrapper.prototype.getAllResponseHeaders = function () {\n  return this._xhr.getAllResponseHeaders != undefined\n    ? this._xhr.getAllResponseHeaders()\n    : ''\n}\nXHRWrapper.prototype.send = function () {\n  // loading indicator in Safari < ? (6), Chrome < 14, Firefox\n  if (\n    !('ontimeout' in XMLHttpRequest.prototype) &&\n    document != undefined &&\n    document.readyState != undefined &&\n    document.readyState !== 'complete'\n  ) {\n    var that = this\n    that._sendTimeout = setTimeout(function () {\n      that._sendTimeout = 0\n      that.send()\n    }, 4)\n    return\n  }\n\n  var xhr = this._xhr\n  // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\n  xhr.withCredentials = this.withCredentials\n  xhr.responseType = this.responseType\n  try {\n    // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\n    xhr.send(undefined)\n  } catch (error1) {\n    // Safari 5.1.7, Opera 12\n    throw error1\n  }\n}\n\nfunction toLowerCase(name) {\n  return name.replace(/[A-Z]/g, function (c) {\n    return String.fromCharCode(c.charCodeAt(0) + 0x20)\n  })\n}\n\nfunction HeadersPolyfill(all) {\n  // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\n  var map = Object.create(null)\n  var array = all.split('\\r\\n')\n  for (var i = 0; i < array.length; i += 1) {\n    var line = array[i]\n    var parts = line.split(': ')\n    var name = parts.shift()\n    var value = parts.join(': ')\n    map[toLowerCase(name)] = value\n  }\n  this._map = map\n}\nHeadersPolyfill.prototype.get = function (name) {\n  return this._map[toLowerCase(name)]\n}\n\nfunction XHRTransport() {}\n\nXHRTransport.prototype.open = function (\n  xhr,\n  onStartCallback,\n  onProgressCallback,\n  onFinishCallback,\n  url,\n  withCredentials,\n  headers\n) {\n  xhr.open('GET', url)\n  var offset = 0\n  xhr.onprogress = function () {\n    var responseText = xhr.responseText\n    var chunk = responseText.slice(offset)\n    offset += chunk.length\n    onProgressCallback(chunk)\n  }\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 2) {\n      var status = xhr.status\n      var statusText = xhr.statusText\n      var contentType = xhr.getResponseHeader('Content-Type')\n      var headers = xhr.getAllResponseHeaders()\n      onStartCallback(\n        status,\n        statusText,\n        contentType,\n        new HeadersPolyfill(headers),\n        function () {\n          xhr.abort()\n        }\n      )\n    } else if (xhr.readyState === 4) {\n      onFinishCallback()\n    }\n  }\n  xhr.withCredentials = withCredentials\n  xhr.responseType = 'text'\n  for (var name in headers) {\n    if (Object.prototype.hasOwnProperty.call(headers, name)) {\n      xhr.setRequestHeader(name, headers[name])\n    }\n  }\n  xhr.send()\n}\n\nfunction HeadersWrapper(headers) {\n  this._headers = headers\n}\nHeadersWrapper.prototype.get = function (name) {\n  return this._headers.get(name)\n}\n\nfunction FetchTransport() {}\n\nFetchTransport.prototype.open = function (\n  xhr,\n  onStartCallback,\n  onProgressCallback,\n  onFinishCallback,\n  url,\n  withCredentials,\n  headers\n) {\n  var controller = new AbortController()\n  var signal = controller.signal // see #120\n  var textDecoder = new TextDecoder()\n  fetch(url, {\n    headers: headers,\n    credentials: withCredentials ? 'include' : 'same-origin',\n    signal: signal,\n    cache: 'no-store',\n  })\n    .then(function (response) {\n      var reader = response.body.getReader()\n      onStartCallback(\n        response.status,\n        response.statusText,\n        response.headers.get('Content-Type'),\n        new HeadersWrapper(response.headers),\n        function () {\n          controller.abort()\n          reader.cancel()\n        }\n      )\n      return new Promise(function (resolve, reject) {\n        var readNextChunk = function () {\n          reader\n            .read()\n            .then(function (result) {\n              if (result.done) {\n                // Note: bytes in textDecoder are ignored\n                resolve(undefined)\n              } else {\n                var chunk = textDecoder.decode(result.value, { stream: true })\n                onProgressCallback(chunk)\n                readNextChunk()\n              }\n            })\n            ['catch'](function (error) {\n              reject(error)\n            })\n        }\n        readNextChunk()\n      })\n    })\n    .then(\n      function (result) {\n        onFinishCallback()\n        return result\n      },\n      function (error) {\n        onFinishCallback()\n        return Promise.reject(error)\n      }\n    )\n}\n\nfunction EventTarget() {\n  this._listeners = Object.create(null)\n}\n\nfunction throwError(e) {\n  setTimeout(function () {\n    throw e\n  }, 0)\n}\n\nEventTarget.prototype.dispatchEvent = function (event) {\n  event.target = this\n  var typeListeners = this._listeners[event.type]\n  if (typeListeners != undefined) {\n    var length = typeListeners.length\n    for (var i = 0; i < length; i += 1) {\n      var listener = typeListeners[i]\n      try {\n        if (typeof listener.handleEvent === 'function') {\n          listener.handleEvent(event)\n        } else {\n          listener.call(this, event)\n        }\n      } catch (e) {\n        throwError(e)\n      }\n    }\n  }\n}\nEventTarget.prototype.addEventListener = function (type, listener) {\n  type = String(type)\n  var listeners = this._listeners\n  var typeListeners = listeners[type]\n  if (typeListeners == undefined) {\n    typeListeners = []\n    listeners[type] = typeListeners\n  }\n  var found = false\n  for (var i = 0; i < typeListeners.length; i += 1) {\n    if (typeListeners[i] === listener) {\n      found = true\n    }\n  }\n  if (!found) {\n    typeListeners.push(listener)\n  }\n}\nEventTarget.prototype.removeEventListener = function (type, listener) {\n  type = String(type)\n  var listeners = this._listeners\n  var typeListeners = listeners[type]\n  if (typeListeners != undefined) {\n    var filtered = []\n    for (var i = 0; i < typeListeners.length; i += 1) {\n      if (typeListeners[i] !== listener) {\n        filtered.push(typeListeners[i])\n      }\n    }\n    if (filtered.length === 0) {\n      delete listeners[type]\n    } else {\n      listeners[type] = filtered\n    }\n  }\n}\n\nfunction Event(type) {\n  this.type = type\n  this.target = undefined\n}\n\nfunction MessageEvent(type, options) {\n  Event.call(this, type)\n  this.data = options.data\n  this.lastEventId = options.lastEventId\n}\n\nMessageEvent.prototype = Object.create(Event.prototype)\n\nfunction ConnectionEvent(type, options) {\n  Event.call(this, type)\n  this.status = options.status\n  this.statusText = options.statusText\n  this.headers = options.headers\n}\n\nConnectionEvent.prototype = Object.create(Event.prototype)\n\nvar WAITING = -1\nvar CONNECTING = 0\nvar OPEN = 1\nvar CLOSED = 2\n\nvar AFTER_CR = -1\nvar FIELD_START = 0\nvar FIELD = 1\nvar VALUE_START = 2\nvar VALUE = 3\n\nvar contentTypeRegExp = /^text\\/event\\-stream;?(\\s*charset\\=utf\\-8)?$/i\n\nvar MINIMUM_DURATION = 1000\nvar MAXIMUM_DURATION = 18000000\n\nvar parseDuration = function (value, def) {\n  var n = parseInt(value, 10)\n  if (n !== n) {\n    n = def\n  }\n  return clampDuration(n)\n}\nvar clampDuration = function (n) {\n  return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION)\n}\n\nvar fire = function (that, f, event) {\n  try {\n    if (typeof f === 'function') {\n      f.call(that, event)\n    }\n  } catch (e) {\n    throwError(e)\n  }\n}\n\nfunction EventSourcePolyfill(url, options) {\n  EventTarget.call(this)\n\n  this.onopen = undefined\n  this.onmessage = undefined\n  this.onerror = undefined\n\n  this.url = undefined\n  this.readyState = undefined\n  this.withCredentials = undefined\n\n  this._close = undefined\n\n  start(this, url, options)\n}\n\nvar isFetchSupported =\n  fetch != undefined && Response != undefined && 'body' in Response.prototype\n\nfunction start(es, url, options) {\n  url = String(url)\n  var withCredentials = options != undefined && Boolean(options.withCredentials)\n\n  var initialRetry = clampDuration(1000)\n  var heartbeatTimeout =\n    options != undefined && options.heartbeatTimeout != undefined\n      ? parseDuration(options.heartbeatTimeout, 45000)\n      : clampDuration(45000)\n\n  var lastEventId = ''\n  var retry = initialRetry\n  var wasActivity = false\n  var headers =\n    options != undefined && options.headers != undefined\n      ? JSON.parse(JSON.stringify(options.headers))\n      : undefined\n  var CurrentTransport =\n    options != undefined && options.Transport != undefined\n      ? options.Transport\n      : XMLHttpRequest\n  var xhr =\n    isFetchSupported &&\n    !(options != undefined && options.Transport != undefined)\n      ? undefined\n      : new XHRWrapper(new CurrentTransport())\n  var transport = xhr == undefined ? new FetchTransport() : new XHRTransport()\n  var cancelFunction = undefined\n  var timeout = 0\n  var currentState = WAITING\n  var dataBuffer = ''\n  var lastEventIdBuffer = ''\n  var eventTypeBuffer = ''\n\n  var textBuffer = ''\n  var state = FIELD_START\n  var fieldStart = 0\n  var valueStart = 0\n\n  var onStart = function (status, statusText, contentType, headers, cancel) {\n    if (currentState === CONNECTING) {\n      cancelFunction = cancel\n      if (\n        status === 200 &&\n        contentType != undefined &&\n        contentTypeRegExp.test(contentType)\n      ) {\n        currentState = OPEN\n        wasActivity = true\n        retry = initialRetry\n        es.readyState = OPEN\n        var event = new ConnectionEvent('open', {\n          status: status,\n          statusText: statusText,\n          headers: headers,\n        })\n        es.dispatchEvent(event)\n        fire(es, es.onopen, event)\n      } else {\n        var message = ''\n        if (status !== 200) {\n          if (statusText) {\n            statusText = statusText.replace(/\\s+/g, ' ')\n          }\n          message =\n            \"EventSource's response has a status \" +\n            status +\n            ' ' +\n            statusText +\n            ' that is not 200. Aborting the connection.'\n        } else {\n          message =\n            \"EventSource's response has a Content-Type specifying an unsupported type: \" +\n            (contentType == undefined\n              ? '-'\n              : contentType.replace(/\\s+/g, ' ')) +\n            '. Aborting the connection.'\n        }\n        throwError(new Error(message))\n        close()\n        var event = new ConnectionEvent('error', {\n          status: status,\n          statusText: statusText,\n          headers: headers,\n        })\n        es.dispatchEvent(event)\n        fire(es, es.onerror, event)\n      }\n    }\n  }\n\n  var onProgress = function (textChunk) {\n    if (currentState === OPEN) {\n      var n = -1\n      for (var i = 0; i < textChunk.length; i += 1) {\n        var c = textChunk.charCodeAt(i)\n        if (c === '\\n'.charCodeAt(0) || c === '\\r'.charCodeAt(0)) {\n          n = i\n        }\n      }\n      var chunk = (n !== -1 ? textBuffer : '') + textChunk.slice(0, n + 1)\n      textBuffer = (n === -1 ? textBuffer : '') + textChunk.slice(n + 1)\n      if (chunk !== '') {\n        wasActivity = true\n      }\n      for (var position = 0; position < chunk.length; position += 1) {\n        var c = chunk.charCodeAt(position)\n        if (state === AFTER_CR && c === '\\n'.charCodeAt(0)) {\n          state = FIELD_START\n        } else {\n          if (state === AFTER_CR) {\n            state = FIELD_START\n          }\n          if (c === '\\r'.charCodeAt(0) || c === '\\n'.charCodeAt(0)) {\n            if (state !== FIELD_START) {\n              if (state === FIELD) {\n                valueStart = position + 1\n              }\n              var field = chunk.slice(fieldStart, valueStart - 1)\n              var value = chunk.slice(\n                valueStart +\n                  (valueStart < position &&\n                  chunk.charCodeAt(valueStart) === ' '.charCodeAt(0)\n                    ? 1\n                    : 0),\n                position\n              )\n              if (field === 'data') {\n                dataBuffer += '\\n'\n                dataBuffer += value\n              } else if (field === 'id') {\n                lastEventIdBuffer = value\n              } else if (field === 'event') {\n                eventTypeBuffer = value\n              } else if (field === 'retry') {\n                initialRetry = parseDuration(value, initialRetry)\n                retry = initialRetry\n              } else if (field === 'heartbeatTimeout') {\n                heartbeatTimeout = parseDuration(value, heartbeatTimeout)\n                if (timeout !== 0) {\n                  clearTimeout(timeout)\n                  timeout = setTimeout(function () {\n                    onTimeout()\n                  }, heartbeatTimeout)\n                }\n              }\n            }\n            if (state === FIELD_START) {\n              if (dataBuffer !== '') {\n                lastEventId = lastEventIdBuffer\n                if (eventTypeBuffer === '') {\n                  eventTypeBuffer = 'message'\n                }\n                var event = new MessageEvent(eventTypeBuffer, {\n                  data: dataBuffer.slice(1),\n                  lastEventId: lastEventIdBuffer,\n                })\n                es.dispatchEvent(event)\n                if (eventTypeBuffer === 'message') {\n                  fire(es, es.onmessage, event)\n                }\n                if (currentState === CLOSED) {\n                  return\n                }\n              }\n              dataBuffer = ''\n              eventTypeBuffer = ''\n            }\n            state = c === '\\r'.charCodeAt(0) ? AFTER_CR : FIELD_START\n          } else {\n            if (state === FIELD_START) {\n              fieldStart = position\n              state = FIELD\n            }\n            if (state === FIELD) {\n              if (c === ':'.charCodeAt(0)) {\n                valueStart = position + 1\n                state = VALUE_START\n              }\n            } else if (state === VALUE_START) {\n              state = VALUE\n            }\n          }\n        }\n      }\n    }\n  }\n\n  var onFinish = function () {\n    if (currentState === OPEN || currentState === CONNECTING) {\n      currentState = WAITING\n      if (timeout !== 0) {\n        clearTimeout(timeout)\n        timeout = 0\n      }\n      timeout = setTimeout(function () {\n        onTimeout()\n      }, retry)\n      retry = clampDuration(Math.min(initialRetry * 16, retry * 2))\n\n      es.readyState = CONNECTING\n      var event = new Event('error')\n      es.dispatchEvent(event)\n      fire(es, es.onerror, event)\n    }\n  }\n\n  var close = function () {\n    currentState = CLOSED\n    if (cancelFunction != undefined) {\n      cancelFunction()\n      cancelFunction = undefined\n    }\n    if (timeout !== 0) {\n      clearTimeout(timeout)\n      timeout = 0\n    }\n    es.readyState = CLOSED\n  }\n\n  var onTimeout = function () {\n    timeout = 0\n\n    if (currentState !== WAITING) {\n      if (!wasActivity && cancelFunction != undefined) {\n        throwError(\n          new Error(\n            'No activity within ' +\n              heartbeatTimeout +\n              ' milliseconds. Reconnecting.'\n          )\n        )\n        cancelFunction()\n        cancelFunction = undefined\n      } else {\n        wasActivity = false\n        timeout = setTimeout(function () {\n          onTimeout()\n        }, heartbeatTimeout)\n      }\n      return\n    }\n\n    wasActivity = false\n    timeout = setTimeout(function () {\n      onTimeout()\n    }, heartbeatTimeout)\n\n    currentState = CONNECTING\n    dataBuffer = ''\n    eventTypeBuffer = ''\n    lastEventIdBuffer = lastEventId\n    textBuffer = ''\n    fieldStart = 0\n    valueStart = 0\n    state = FIELD_START\n\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\n    // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\n    var requestURL = url\n    if (url.slice(0, 5) !== 'data:' && url.slice(0, 5) !== 'blob:') {\n      if (lastEventId !== '') {\n        requestURL +=\n          (url.indexOf('?') === -1 ? '?' : '&') +\n          'lastEventId=' +\n          encodeURIComponent(lastEventId)\n      }\n    }\n    var requestHeaders = {}\n    requestHeaders['Accept'] = 'text/event-stream'\n    if (headers != undefined) {\n      for (var name in headers) {\n        if (Object.prototype.hasOwnProperty.call(headers, name)) {\n          requestHeaders[name] = headers[name]\n        }\n      }\n    }\n    try {\n      transport.open(\n        xhr,\n        onStart,\n        onProgress,\n        onFinish,\n        requestURL,\n        withCredentials,\n        requestHeaders\n      )\n    } catch (error) {\n      close()\n      throw error\n    }\n  }\n\n  es.url = url\n  es.readyState = CONNECTING\n  es.withCredentials = withCredentials\n  es._close = close\n\n  onTimeout()\n}\n\nEventSourcePolyfill.prototype = Object.create(EventTarget.prototype)\nEventSourcePolyfill.prototype.CONNECTING = CONNECTING\nEventSourcePolyfill.prototype.OPEN = OPEN\nEventSourcePolyfill.prototype.CLOSED = CLOSED\nEventSourcePolyfill.prototype.close = function () {\n  this._close()\n}\n\nEventSourcePolyfill.CONNECTING = CONNECTING\nEventSourcePolyfill.OPEN = OPEN\nEventSourcePolyfill.CLOSED = CLOSED\nEventSourcePolyfill.prototype.withCredentials = undefined\n\nexport default EventSourcePolyfill\n"]}
{"version":3,"sources":["../../../../build/webpack/config/helpers.ts"],"names":["loader","rule","config","module","rules","oneOf","existing","find","arrayRule","push","unshiftLoader","unshift","plugin","p","plugins"],"mappings":"gGAAA,+E,mFAGO,KAAMA,CAAAA,MAAM,CAAG,oBAAM,QAASA,CAAAA,MAAT,CAC1BC,IAD0B,CAE1BC,MAF0B,CAG1B,CACA,GAAI,CAACA,MAAM,CAACC,MAAZ,CAAoB,CAClBD,MAAM,CAACC,MAAP,CAAgB,CAAEC,KAAK,CAAE,EAAT,CAAhB,CACD,CAED,GAAIH,IAAI,CAACI,KAAT,CAAgB,CACd,KAAMC,CAAAA,QAAQ,CAAGJ,MAAM,CAACC,MAAP,CAAcC,KAAd,CAAoBG,IAApB,CAA0BC,SAAD,EAAeA,SAAS,CAACH,KAAlD,CAAjB,CACA,GAAIC,QAAJ,CAAc,CACZA,QAAQ,CAACD,KAAT,CAAgBI,IAAhB,CAAqB,GAAGR,IAAI,CAACI,KAA7B,EACA,MAAOH,CAAAA,MAAP,CACD,CACF,CAEDA,MAAM,CAACC,MAAP,CAAcC,KAAd,CAAoBK,IAApB,CAAyBR,IAAzB,EACA,MAAOC,CAAAA,MAAP,CACD,CAlBqB,CAAf,C,sBAoBA,KAAMQ,CAAAA,aAAa,CAAG,oBAAM,QAASA,CAAAA,aAAT,CACjCT,IADiC,CAEjCC,MAFiC,CAGjC,CACA,GAAI,CAACA,MAAM,CAACC,MAAZ,CAAoB,CAClBD,MAAM,CAACC,MAAP,CAAgB,CAAEC,KAAK,CAAE,EAAT,CAAhB,CACD,CAED,GAAIH,IAAI,CAACI,KAAT,CAAgB,CACd,KAAMC,CAAAA,QAAQ,CAAGJ,MAAM,CAACC,MAAP,CAAcC,KAAd,CAAoBG,IAApB,CAA0BC,SAAD,EAAeA,SAAS,CAACH,KAAlD,CAAjB,CACA,GAAIC,QAAJ,CAAc,CACZA,QAAQ,CAACD,KAAT,CAAgBM,OAAhB,CAAwB,GAAGV,IAAI,CAACI,KAAhC,EACA,MAAOH,CAAAA,MAAP,CACD,CACF,CAEDA,MAAM,CAACC,MAAP,CAAcC,KAAd,CAAoBO,OAApB,CAA4BV,IAA5B,EACA,MAAOC,CAAAA,MAAP,CACD,CAlB4B,CAAtB,C,oCAoBA,KAAMU,CAAAA,MAAM,CAAG,oBAAM,QAASA,CAAAA,MAAT,CAC1BC,CAD0B,CAE1BX,MAF0B,CAG1B,CACA,GAAI,CAACA,MAAM,CAACY,OAAZ,CAAqB,CACnBZ,MAAM,CAACY,OAAP,CAAiB,EAAjB,CACD,CACDZ,MAAM,CAACY,OAAP,CAAeL,IAAf,CAAoBI,CAApB,EACA,MAAOX,CAAAA,MAAP,CACD,CATqB,CAAf,C","sourcesContent":["import curry from 'next/dist/compiled/lodash.curry'\nimport { webpack } from 'next/dist/compiled/webpack/webpack'\n\nexport const loader = curry(function loader(\n  rule: webpack.RuleSetRule,\n  config: webpack.Configuration\n) {\n  if (!config.module) {\n    config.module = { rules: [] }\n  }\n\n  if (rule.oneOf) {\n    const existing = config.module.rules.find((arrayRule) => arrayRule.oneOf)\n    if (existing) {\n      existing.oneOf!.push(...rule.oneOf)\n      return config\n    }\n  }\n\n  config.module.rules.push(rule)\n  return config\n})\n\nexport const unshiftLoader = curry(function unshiftLoader(\n  rule: webpack.RuleSetRule,\n  config: webpack.Configuration\n) {\n  if (!config.module) {\n    config.module = { rules: [] }\n  }\n\n  if (rule.oneOf) {\n    const existing = config.module.rules.find((arrayRule) => arrayRule.oneOf)\n    if (existing) {\n      existing.oneOf!.unshift(...rule.oneOf)\n      return config\n    }\n  }\n\n  config.module.rules.unshift(rule)\n  return config\n})\n\nexport const plugin = curry(function plugin(\n  p: webpack.Plugin,\n  config: webpack.Configuration\n) {\n  if (!config.plugins) {\n    config.plugins = []\n  }\n  config.plugins.push(p)\n  return config\n})\n"]}
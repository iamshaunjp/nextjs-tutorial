{"version":3,"sources":["../../../../build/webpack/config/index.ts"],"names":["build","config","rootDirectory","customAppFile","isDevelopment","isServer","assetPrefix","sassOptions","productionBrowserSourceMaps","future","ctx","isProduction","isClient","endsWith","slice","fn"],"mappings":"yDAEA,mCACA,iCACA,8BAEO,cAAeA,CAAAA,KAAf,CACLC,MADK,CAEL,CACEC,aADF,CAEEC,aAFF,CAGEC,aAHF,CAIEC,QAJF,CAKEC,WALF,CAMEC,WANF,CAOEC,2BAPF,CAQEC,MARF,CAFK,CAqB2B,CAChC,KAAMC,CAAAA,GAAyB,CAAG,CAChCR,aADgC,CAEhCC,aAFgC,CAGhCC,aAHgC,CAIhCO,YAAY,CAAE,CAACP,aAJiB,CAKhCC,QALgC,CAMhCO,QAAQ,CAAE,CAACP,QANqB,CAOhCC,WAAW,CAAEA,WAAW,CACpBA,WAAW,CAACO,QAAZ,CAAqB,GAArB,EACEP,WAAW,CAACQ,KAAZ,CAAkB,CAAlB,CAAqB,CAAC,CAAtB,CADF,CAEER,WAHkB,CAIpB,EAX4B,CAYhCC,WAZgC,CAahCC,2BAbgC,CAchCC,MAdgC,CAAlC,CAiBA,KAAMM,CAAAA,EAAE,CAAG,gBAAK,eAAKL,GAAL,CAAL,CAAgB,aAAIA,GAAJ,CAAhB,CAAX,CACA,MAAOK,CAAAA,EAAE,CAACd,MAAD,CAAT,CACD","sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { NextConfig } from '../../../next-server/server/config'\nimport { base } from './blocks/base'\nimport { css } from './blocks/css'\nimport { ConfigurationContext, pipe } from './utils'\n\nexport async function build(\n  config: webpack.Configuration,\n  {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isServer,\n    assetPrefix,\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n  }: {\n    rootDirectory: string\n    customAppFile: string | null\n    isDevelopment: boolean\n    isServer: boolean\n    assetPrefix: string\n    sassOptions: any\n    productionBrowserSourceMaps: boolean\n    future: NextConfig['future']\n  }\n): Promise<webpack.Configuration> {\n  const ctx: ConfigurationContext = {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isProduction: !isDevelopment,\n    isServer,\n    isClient: !isServer,\n    assetPrefix: assetPrefix\n      ? assetPrefix.endsWith('/')\n        ? assetPrefix.slice(0, -1)\n        : assetPrefix\n      : '',\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n  }\n\n  const fn = pipe(base(ctx), css(ctx))\n  return fn(config)\n}\n"]}
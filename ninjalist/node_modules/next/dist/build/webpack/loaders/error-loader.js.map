{"version":3,"sources":["../../../../build/webpack/loaders/error-loader.ts"],"names":["ErrorLoader","options","loaderUtils","getOptions","reason","resource","_module","issuer","context","rootContext","_compiler","path","relative","err","Error","chalk","cyan","emitError"],"mappings":"4DAAA,oDACA,oFACA,kD,mFAGA,KAAMA,CAAAA,WAAkC,CAAG,UAAY,gGACrD,KAAMC,CAAAA,OAAO,CAAGC,qBAAYC,UAAZ,CAAuB,IAAvB,GAAgC,EAAhD,CAEA,KAAM,CAAEC,MAAM,CAAG,+BAAX,EAA+CH,OAArD,CAEA,KAAMI,CAAAA,QAAQ,uCAAG,KAAKC,OAAR,qCAAG,cAAcC,MAAjB,eAAG,qBAAsBF,QAAzB,8BAAqC,IAAnD,CACA,KAAMG,CAAAA,OAAO,oBAAG,KAAKC,WAAR,2CAAuB,KAAKC,SAA5B,eAAuB,gBAAgBF,OAApD,CAEA,KAAMD,CAAAA,MAAM,CAAGF,QAAQ,CACnBG,OAAO,CACLG,cAAKC,QAAL,CAAcJ,OAAd,CAAuBH,QAAvB,CADK,CAELA,QAHiB,CAInB,IAJJ,CAMA,KAAMQ,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,CACVV,MAAM,EAAIG,MAAM,CAAI,eAAcQ,eAAMC,IAAN,CAAWT,MAAX,CAAmB,EAArC,CAAyC,EAAnD,CADI,CAAZ,CAGA,KAAKU,SAAL,CAAeJ,GAAf,EACD,CAlBD,C,aAoBeb,W","sourcesContent":["import chalk from 'chalk'\nimport loaderUtils from 'next/dist/compiled/loader-utils'\nimport path from 'path'\nimport { webpack } from 'next/dist/compiled/webpack/webpack'\n\nconst ErrorLoader: webpack.loader.Loader = function () {\n  const options = loaderUtils.getOptions(this) || {}\n\n  const { reason = 'An unknown error has occurred' } = options\n\n  const resource = this._module?.issuer?.resource ?? null\n  const context = this.rootContext ?? this._compiler?.context\n\n  const issuer = resource\n    ? context\n      ? path.relative(context, resource)\n      : resource\n    : null\n\n  const err = new Error(\n    reason + (issuer ? `\\nLocation: ${chalk.cyan(issuer)}` : '')\n  )\n  this.emitError(err)\n}\n\nexport default ErrorLoader\n"]}
{"version":3,"sources":["../../../../build/webpack/loaders/next-client-pages-loader.ts"],"names":["nextClientPagesLoader","tracer","withSpan","currentTraceSpan","span","startSpan","absolutePagePath","page","loaderUtils","getOptions","setAttribute","stringifiedAbsolutePagePath","JSON","stringify","stringifiedPage"],"mappings":"4DAAA,oFACA,oC,mFAOA;AACA,QAASA,CAAAA,qBAAT,EAA0C,CACxC,MAAOC,gBAAOC,QAAP,CAAgB,KAAKC,gBAArB,CAAuC,IAAM,CAClD,KAAMC,CAAAA,IAAI,CAAGH,eAAOI,SAAP,CAAiB,0BAAjB,CAAb,CACA,MAAO,oBAAQD,IAAR,CAAc,IAAM,CACzB,KAAM,CAAEE,gBAAF,CAAoBC,IAApB,EAA6BC,qBAAYC,UAAZ,CACjC,IADiC,CAAnC,CAIAL,IAAI,CAACM,YAAL,CAAkB,kBAAlB,CAAsCJ,gBAAtC,EAEA,KAAMK,CAAAA,2BAA2B,CAAGC,IAAI,CAACC,SAAL,CAAeP,gBAAf,CAApC,CACA,KAAMQ,CAAAA,eAAe,CAAGF,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAxB,CAEA,MAAQ;AACd;AACA,UAAUO,eAAgB;AAC1B;AACA,2BAA2BH,2BAA4B;AACvD;AACA;AACA,KAPM,CAQD,CAlBM,CAAP,CAmBD,CArBM,CAAP,CAsBD,C,aAEcX,qB","sourcesContent":["import loaderUtils from 'next/dist/compiled/loader-utils'\nimport { tracer, traceFn } from '../../tracer'\n\nexport type ClientPagesLoaderOptions = {\n  absolutePagePath: string\n  page: string\n}\n\n// this parameter: https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\nfunction nextClientPagesLoader(this: any) {\n  return tracer.withSpan(this.currentTraceSpan, () => {\n    const span = tracer.startSpan('next-client-pages-loader')\n    return traceFn(span, () => {\n      const { absolutePagePath, page } = loaderUtils.getOptions(\n        this\n      ) as ClientPagesLoaderOptions\n\n      span.setAttribute('absolutePagePath', absolutePagePath)\n\n      const stringifiedAbsolutePagePath = JSON.stringify(absolutePagePath)\n      const stringifiedPage = JSON.stringify(page)\n\n      return `\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        ${stringifiedPage},\n        function () {\n          return require(${stringifiedAbsolutePagePath});\n        }\n      ]);\n    `\n    })\n  })\n}\n\nexport default nextClientPagesLoader\n"]}
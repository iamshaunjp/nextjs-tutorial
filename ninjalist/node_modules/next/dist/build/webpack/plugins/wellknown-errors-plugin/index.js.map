{"version":3,"sources":["../../../../../build/webpack/plugins/wellknown-errors-plugin/index.ts"],"names":["WellKnownErrorsPlugin","apply","compiler","hooks","compilation","tap","afterSeal","tapPromise","errors","length","Promise","all","map","err","moduleError","e","console","log"],"mappings":"0EACA,wDAEO,KAAMA,CAAAA,qBAAsB,CACjCC,KAAK,CAACC,QAAD,CAA6B,CAChCA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,uBAA/B,CAAyDD,WAAD,EAAiB,CACvEA,WAAW,CAACD,KAAZ,CAAkBG,SAAlB,CAA4BC,UAA5B,CACE,uBADF,CAEE,SAAY,yBACV,wBAAIH,WAAW,CAACI,MAAhB,SAAI,oBAAoBC,MAAxB,CAAgC,CAC9BL,WAAW,CAACI,MAAZ,CAAqB,KAAME,CAAAA,OAAO,CAACC,GAAR,CACzBP,WAAW,CAACI,MAAZ,CAAmBI,GAAnB,CAAuB,KAAOC,CAAAA,GAAP,EAAe,CACpC,GAAI,CACF,KAAMC,CAAAA,WAAW,CAAG,KAAM,4CACxBV,WADwB,CAExBS,GAFwB,CAA1B,CAIA,MAAOC,CAAAA,WAAW,GAAK,KAAhB,CAAwBD,GAAxB,CAA8BC,WAArC,CACD,CAAC,MAAOC,CAAP,CAAU,CACVC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACA,MAAOF,CAAAA,GAAP,CACD,CACF,CAXD,CADyB,CAA3B,CAcD,CACF,CAnBH,EAqBD,CAtBD,EAuBD,CAzBgC,C","sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { getModuleBuildError } from './webpackModuleError'\n\nexport class WellKnownErrorsPlugin {\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap('WellKnownErrorsPlugin', (compilation) => {\n      compilation.hooks.afterSeal.tapPromise(\n        'WellKnownErrorsPlugin',\n        async () => {\n          if (compilation.errors?.length) {\n            compilation.errors = await Promise.all(\n              compilation.errors.map(async (err) => {\n                try {\n                  const moduleError = await getModuleBuildError(\n                    compilation,\n                    err\n                  )\n                  return moduleError === false ? err : moduleError\n                } catch (e) {\n                  console.log(e)\n                  return err\n                }\n              })\n            )\n          }\n        }\n      )\n    })\n  }\n}\n"]}